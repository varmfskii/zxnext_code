\documentclass[10pt]{book}
\usepackage{csvsimple}
\usepackage{booktabs}
\usepackage[shortlabels]{enumitem}
\usepackage[section]{placeins}
\usepackage{graphicx}
\usepackage{makeidx}
\usepackage{xintbinhex}
%\usepackage{xintexpr}
\usepackage{hang}
\usepackage{listings}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{listings}
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}
\setlist{nosep}
\usepackage{etoolbox}
\makeatletter
\patchcmd{\@verbatim}
         {\verbatim@font}
         {\verbatim@font\scriptsize}
         {}{}
\makeatother
\usepackage{pdflscape}
\usepackage{longtable}
\usepackage{array}
\usepackage{multicol}
\usepackage{xcolor}

\definecolor{comment}{RGB}{0,128,0}     % dark green
\definecolor{string}{RGB}{255,0,0}      % red
\definecolor{instruction}{RGB}{0,0,255} % blue
\definecolor{directive}{RGB}{128,0,128} % purple
%\definecolor{register}{RGB}{128,0,0}    % dark red

\lstdefinestyle{asm}{
	commentstyle=\color{comment},
	stringstyle=\color{string},
	keywordstyle=\color{instruction},
	keywordstyle=[2]\color{directive},
	%keywordstyle=[3]\color{register},
	basicstyle=\footnotesize\ttfamily,
	%numbers=left,
	%numberstyle=\tiny,
	%numbersep=5pt,
	frame=lines,
	breaklines=true,
	prebreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	showstringspaces=false,
	upquote=true,
	tabsize=4,
}

% custom sequences for consistency
\newcommand{\iis}{ I\textsuperscript{2}S }
\newcommand{\iic}{ I\textsuperscript{2}C }
\newcommand{\hexdec}[1]{\$#1 (\xintHexToDec{#1})}
\newcommand{\register}[3]{Register (#1) \hexdec{#2} $\Rightarrow$ #3}
\newcommand{\port}[2]{Port \hexdec{#1} #2}
\newcommand{\textoverline}[1]{$\overline{\hbox{#1}}$}

\makeindex
\title{ZX Spectrum Next Programming Notes}
\date{\today}
\author{Theodore (Alex) Evans}
\begin{document}
\lstset{language=[Z80n]Assembler, style=asm}
\frontmatter
\maketitle
\tableofcontents
\mainmatter
\input{intro.tex}
\include{video/video}
\include{audio/audio}
\include{io}
\include{memory/memory}
\include{zxndma/zxndma}
\include{copper/copper}
\include{interrupts/interrupts}
\include{serial}
\include{pi0}
\include{system/system}
\appendix
\include{appendices/ports/ports}
\include{appendices/registers/registers}
\include{appendices/opcode/opcode-mnemonic}
\include{appendices/mnemonic/mnemonic-opcode}
\include{appendices/file_formats}
\include{appendices/call_tables}
\include{appendices/keyboard}
\listoffigures
\listoftables
\printindex
\end{document}
